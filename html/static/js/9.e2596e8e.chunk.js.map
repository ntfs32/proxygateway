{"version":3,"sources":["utils/config.js","constants/index.js","utils/request.js","services/api.js","services/index.js","actions/user.js","components/pages/login/index.js"],"names":["module","exports","apiPrefix","i18n","languages","key","title","flag","defaultLanguage","CANCEL_REQUEST_MESSAGE","CancelToken","axios","window","cancelRequest","Map","api","login","logout","getAllDomain","getOneDomain","addDomain","removeDomain","updateDomain","getServiceListByDomainId","getOneServiceByServiceId","addService","removeService","updateService","getServerListByServiceId","getOneServerByServerId","addServer","removeServer","updateServer","getApiListByServiceId","getOneApiByApiId","addApi","removeApi","updateApi","gen","params","requestParams","url","method","_","isObject","isUndefined","paramsArray","split","length","data","headers","queryString","stringify","options","_options$method","cloneData","cloneDeep","domain","urlMatch","match","Object","slicedToArray","slice","pathToRegexp","parse","compile","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","item","value","name","err","return","e","message","error","withCredentials","toLocaleLowerCase","concat","isEmpty","qs","cancelToken","cancel","set","Date","now","pathname","location","then","response","statusText","status","result","Array","isArray","list","Promise","resolve","objectSpread","success","statusCode","catch","msg","String","reject","request","APIFunction","__webpack_require__","r","__webpack_exports__","d","loginAction","logoutAction","_constants_user__WEBPACK_IMPORTED_MODULE_0__","_services__WEBPACK_IMPORTED_MODULE_1__","type","actionTypes","payload","service","FormItem","Form","Item","Login","AddCount","_this","props","numberActions","addCount","handleSubmit","preventDefault","form","validateFields","values","console","log","userActions","getFieldDecorator","this","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","className","style","color","margin","antd__WEBPACK_IMPORTED_MODULE_8__","onSubmit","rules","required","antd__WEBPACK_IMPORTED_MODULE_9__","size","prefix","antd__WEBPACK_IMPORTED_MODULE_10__","placeholder","href","antd__WEBPACK_IMPORTED_MODULE_11__","htmlType","Component","FormLogin","create","connect","state","dispatch","bindActionCreators"],"mappings":"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","file":"static/js/9.e2596e8e.chunk.js","sourcesContent":["module.exports = {\n    apiPrefix: '/api/v1',\n\n    i18n: {\n        languages: [\n            {\n                key: 'en',\n                title: 'English',\n                flag: '/america.svg',\n            },\n            {\n                key: 'zh',\n                title: '中文',\n                flag: '/china.svg',\n            },\n        ],\n        defaultLanguage: 'zh',\n    }\n}","export const CANCEL_REQUEST_MESSAGE = 'cancle request'","import axios from 'axios'\nimport { cloneDeep, isEmpty } from 'lodash'\nimport pathToRegexp from 'path-to-regexp'\nimport { message } from 'antd'\nimport { CANCEL_REQUEST_MESSAGE } from '../constants'\nimport qs from 'qs'\n\nconst { CancelToken } = axios\nwindow.cancelRequest = new Map()\n\nexport default function request(options) {\n    let { data, url, method = 'get' } = options\n    const cloneData = cloneDeep(data)\n\n    try {\n        let domain = ''\n        const urlMatch = url.match(/[a-zA-z]+:\\/\\/[^/]*/)\n        if (urlMatch) {\n            ;[domain] = urlMatch\n            url = url.slice(domain.length)\n        }\n\n        const match = pathToRegexp.parse(url)\n        url = pathToRegexp.compile(url)(data)\n\n        for (const item of match) {\n            if (item instanceof Object && item.name in cloneData) {\n                delete cloneData[item.name]\n            }\n        }\n        url = domain + url\n    } catch (e) {\n        message.error(e.message)\n    }\n\n    // 携带cookie\n    options.withCredentials = true\n\n    options.url =\n        method.toLocaleLowerCase() === 'get'\n            ? `${url}${isEmpty(cloneData) ? '' : '?'}${qs.stringify(cloneData)}`\n            : url\n\n    options.cancelToken = new CancelToken(cancel => {\n        window.cancelRequest.set(Symbol(Date.now()), {\n            pathname: window.location.pathname,\n            cancel,\n        })\n    })\n\n    return axios(options)\n        .then(response => {\n            const { statusText, status, data } = response\n\n            let result = {}\n            if (typeof data === 'object') {\n                result = data\n                if (Array.isArray(data)) {\n                    result.list = data\n                }\n            } else {\n                result.data = data\n            }\n\n            return Promise.resolve({\n                success: true,\n                message: statusText,\n                statusCode: status,\n                ...result,\n            })\n        })\n        .catch(error => {\n            const { response, message } = error\n\n            if (String(message) === CANCEL_REQUEST_MESSAGE) {\n                return {\n                    success: false,\n                }\n            }\n\n            let msg\n            let statusCode\n\n            if (response && response instanceof Object) {\n                const { data, statusText } = response\n                statusCode = response.status\n                msg = data.message || statusText\n            } else {\n                statusCode = 600\n                msg = error.message || 'Network Error'\n            }\n\n            /* eslint-disable */\n            return Promise.reject({\n                success: false,\n                statusCode,\n                message: msg,\n            })\n        })\n}","\nexport default {\n    // login\n    login: 'POST /login',\n\n    logout: '/logout',\n\n    // domain\n    getAllDomain: 'POST /domain/all',\n    getOneDomain: 'POST /domain/get',\n    addDomain: 'POST /domain/add',\n    removeDomain: 'POST /domain/delete',\n    updateDomain: 'POST /domain/update',\n\n    // service\n    getServiceListByDomainId: 'POST /service/list',\n    getOneServiceByServiceId: 'POST /service/get',\n    addService: 'POST /service/add',\n    removeService: 'POST /service/delete',\n    updateService: 'POST /service/edit',\n\n    \n\n    // server\n    getServerListByServiceId: 'POST /server/list',\n    getOneServerByServerId: 'POST /server/get',\n    addServer: 'POST /server/add',\n    removeServer: 'POST /server/delete',\n    updateServer: 'POST /server/edit',\n\n    // api\n    getApiListByServiceId: 'POST /api/list',\n    getOneApiByApiId: 'POST /api/get',\n    addApi: 'POST /api/add',\n    removeApi: 'POST /api/delete',\n    updateApi: 'POST /api/edit',\n}","import request from '../utils/request'\nimport { apiPrefix } from '../utils/config'\nimport  _ from 'lodash'\nimport queryString from 'querystring'\nimport api from './api'\n\nconst gen = params => {\n    let requestParams = {\n        url: apiPrefix + params,\n        method: 'GET',\n    }\n    if(_.isObject(params)) {\n        requestParams = params\n        requestParams.url = !_.isUndefined(requestParams.url) ? apiPrefix + requestParams.url : requestParams.url\n        requestParams.method = !_.isUndefined(requestParams.method) ? requestParams.method : 'GET'\n    } else{\n        const paramsArray = params.split(' ')\n        if (paramsArray.length === 2) {\n            requestParams.method = paramsArray[0]\n            requestParams.url = apiPrefix + paramsArray[1]\n        }\n    }\n\n    return function (data) {\n        // 本项目post数据目前非json\n        requestParams.headers = {}\n        requestParams.headers['Content-Type'] = 'application/x-www-form-urlencoded'\n        data = queryString.stringify(data)\n        return request({...requestParams, data})\n    }\n}\n\nconst APIFunction = {}\nfor (const key in api) {\n    APIFunction[key] = gen(api[key])\n}\n\nexport default APIFunction","import * as actionTypes from '../constants/user'\nimport service from '../services'\n\nexport function loginAction(data) {\n    return {\n        type: actionTypes.login,\n        payload: service.login(data)\n    }\n}\n\nexport function logoutAction() {\n    return {\n        type: actionTypes.logout,\n        payload: service.logout()\n    }\n}","import React, { Component } from 'react';\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { Form, Icon, Input, Button } from 'antd'\n\nimport * as userActions from '../../../actions/user'\nimport './index.css';\n\nconst FormItem = Form.Item;\nclass Login extends Component {\n\n  AddCount = () => {\n    this.props.numberActions.addCount(1)\n  }\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        console.log('Received values of form: ', values);\n        this.props.userActions.loginAction(values)\n      }\n    });\n  }\n\n  render() {\n    const { getFieldDecorator } = this.props.form;\n    return (\n      <div className='login'>\n        <h3 style={{ color: 'white', margin: '0 0 20px'}}>Proxy Gateway</h3>\n        <Form onSubmit={this.handleSubmit} className='login-form'>\n          <FormItem>\n            {getFieldDecorator('username', {\n              rules: [{ required: true, message: 'Please input your username!' }],\n            })(\n              <Input size='large' prefix={<Icon type='user' style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder='Username' />\n            )}\n          </FormItem>\n          <FormItem>\n            {getFieldDecorator('password', {\n              rules: [{ required: true, message: 'Please input your Password!' }],\n            })(\n              <Input size='large' prefix={<Icon type='lock' style={{ color: 'rgba(0,0,0,.25)' }} />} type='password' placeholder='Password' />\n            )}\n          </FormItem>\n          <FormItem>\n            <a className='login-form-forgot' href='#forget'>Forgot password</a>\n            <Button size='large' type='primary' htmlType='submit' className='login-form-button'>\n              登陆\n            </Button>\n          </FormItem>\n        </Form>\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state){\n  return state\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    userActions: bindActionCreators(userActions, dispatch)\n  }\n}\n\nconst FormLogin = Form.create()(Login);\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(FormLogin);"],"sourceRoot":""}